<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Draggable Test : Draggable in iframe</title>
    <link rel="stylesheet" href="../visual.css">
    <link rel="stylesheet" href="../../../themes/base/jquery.ui.all.css">
    <script src="../../../jquery-1.9.1.js"></script>
    <script src="../../../ui/jquery.ui.core.js"></script>
    <script src="../../../ui/jquery.ui.widget.js"></script>
    <script src="../../../ui/jquery.ui.mouse.js"></script>
    <script src="../../../ui/jquery.ui.accordion.js"></script>
    <script src="../../../ui/jquery.ui.draggable.js"></script>
    <style>
    #draggable-outer { width: 200px; height: 150px; background: #eee; text-align: center; vertical-align: center; line-height: 150px; font-size: 20px; }
    iframe { width: 80%; margin: 10px auto; height: 400px; }
    #counters { position: fixed; top:20px; right: 20px; margin:0; list-style: none; font-size: 14px;}
    </style>
    <script>

    function updateCounterStatus( $event_counter, new_count ) {
      $( "span.count", $event_counter ).text( new_count );
    }

    function initDraggable() {
        $( "#draggable-iframe" ).contents().find("#draggable-inner").draggable();
    }
    function initNestedDraggable() {
        $( "#draggable-iframe" ).contents().find("#nested-iframe").contents().find("#draggable-inner2").draggable();
    }
    $(function() {

        var $start_counter = $( "#event-start" ),
            $drag_counter = $( "#event-drag" ),
            $stop_counter = $( "#event-stop" ),
            counts = [ 0, 0, 0 ];

        $( "#draggable-outer" ).draggable();
        $(document).on("dragstart", function() {
            counts[ 0 ]++;
            updateCounterStatus( $start_counter, counts[ 0 ] );

        });
        $(document).on("drag", function() {
            counts[ 1 ]++;
            updateCounterStatus( $drag_counter, counts[ 1 ] );

        });
        $(document).on("dragstart", function() {
            counts[ 2 ]++;
            updateCounterStatus( $stop_counter, counts[ 2 ] );
        });
    });
    </script>
</head>
<body>

<div id="draggable-outer">
    <span>ON DOCUMENT</span>
</div>

<ul id="counters">
<li id="event-start" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-play"></span>"start" invoked <span class="count">0</span>x</li>
<li id="event-drag" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrow-4"></span>"drag" invoked <span class="count">0</span>x</li>
<li id="event-stop" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-stop"></span>"stop" invoked <span class="count">0</span>x</li>
</ul>

<iframe id="draggable-iframe" src='iframe.html' onload='initDraggable();'></iframe>

</body>
</html>
